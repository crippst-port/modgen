/*! aiplacement_modgen - v1.0.0 - 2025-11-18
 * @license GPL-3.0-or-later or later
 */
define([],function(){define(["jquery","core/templates","core/modal_factory"],function(t,a,r){return{init:function(i){window.console.log("Course nav init called with config:",i),a.renderForPromise("aiplacement_modgen/course_nav",i).then(function(e){window.console.log("Template promise resolved, data:",e);var n=e.html,e=e.js,o=(window.console.log("HTML length:",n?n.length:"undefined","JS:",e),t("#region-main"));window.console.log("Found #region-main:",o.length,"elements"),o.length&&n?(o.prepend(n),window.console.log("HTML prepended to region-main"),o=t(".aiplacement-modgen-nav"),window.console.log("Nav bar now in DOM:",o.length,"Display:",o.css("display")),e&&e.trim&&e.trim()&&a.runTemplateJS(e),i.showgenerator&&t('.aiplacement-modgen-nav__btn[href*="modal.php"]').on("click",function(e){var o;e.preventDefault(),o=i.generatorurl,e=i.navtitle,r.create({type:r.types.DEFAULT,title:e,body:a.render("aiplacement_modgen/modal",{}),large:!0}).then(function(n){return n.show(),n.setBody('<div class="text-center p-5"><i class="fa fa-spinner fa-spin fa-3x"></i></div>'),t.ajax({url:o,method:"GET",dataType:"html"}).done(function(e){n.setBody(e)}).fail(function(){n.setBody('<div class="alert alert-danger">Failed to load generator</div>')}),n}).catch(function(e){window.console.error("Failed to create modal:",e)})}),window.console.log("Navigation bar inserted successfully")):window.console.error("Could not find #region-main or HTML is undefined")}).catch(function(e){window.console.error("Failed to render course navigation:",e)})}}})});