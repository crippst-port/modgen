/*! aiplacement_modgen - v1.0.0 - 2025-11-28
 * @license GPL-3.0-or-later or later
 */
define(["exports","core/fragment","core/notification","aiplacement_modgen/modal_generator_reactive"],function(e,t,o,r){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0,t=n(t),o=n(o);let i=null;e.init=n=>{n.courseid&&n.contextid?(i=(0,r.init)(n.courseid,n.contextid,n.currentsection||0),t.default.loadFragment("aiplacement_modgen","course_toolbar",n.contextid,{courseid:n.courseid,contextid:n.contextid,showgenerator:n.showgenerator?1:0,showexplore:n.showexplore?1:0,showsuggest:n.showsuggest?1:0,currentsection:n.currentsection||0}).then(t=>{var o=document.querySelector("#region-main");if(o){o.insertAdjacentHTML("afterbegin",t);o=document.querySelector(".navbar-toggler");let e=document.querySelector("#aimodgenNavbar");o&&e&&window.$&&window.$.fn&&window.$.fn.collapse&&(window.$(e).collapse({toggle:!1}),o.addEventListener("click",()=>{window.$(e).collapse("toggle")})),c(),n.showgenerator&&a(n.courseid)}return t}).catch(o.default.exception)):console.error("course_toolbar.init called with invalid config:",n)};let c=()=>{document.querySelectorAll('[data-action="quick-add"]').forEach(o=>{o.addEventListener("click",e=>{e.preventDefault();var e=o.getAttribute("data-form"),t=o.getAttribute("data-title");e&&t&&i&&i.openWithForm(e,t)})})},a=t=>{var e=document.querySelector('[data-action="open-generator"]');e&&e.addEventListener("click",e=>{e.preventDefault(),window.location.href=M.cfg.wwwroot+"/ai/placement/modgen/prompt.php?id="+t})}});