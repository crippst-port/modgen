{{!
    Module exploration template - displays pedagogical insights and learning analysis.
    
    @package     aiplacement_modgen
    @copyright   2025 Tom Cripps <tom.cripps@port.ac.uk>
    @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
}}

<div class="container mt-4 mb-4">
    <!-- Header Section -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center">
                <h1>EXPLORE</h1>
                <button id="download-report-btn" class="btn btn-sm btn-primary" title="Download report as PDF" disabled>
                    ðŸ“¥ Download PDF
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Spinner - Initially shown -->
    <div id="insights-loading" class="row mb-4">
        <div class="col-12 text-center py-5">
            <div class="spinner-border text-primary" role="status"></div>
            <p class="mt-3 text-muted">Loading insights...</p>
        </div>
    </div>

    <!-- Content Container - Hidden until loaded -->
    <div id="content-wrapper" style="display: none;">
        <!-- Pedagogical Section -->
        <div id="insights-pedagogical">
            <div class="row mb-4">
                <div class="col-12">
                    <h2 id="ped-heading"></h2>
                    <div id="ped-content"></div>
                </div>
            </div>
        </div>

        <!-- Learning Types Section -->
        <div id="insights-learning-types">
            <div class="row mb-4">
                <div class="col-12">
                    <h2 id="lt-heading"></h2>
                    <div id="lt-content"></div>
                </div>
            </div>
        </div>

        <!-- Activity Summary Section -->
        <div class="row mb-4">
            <div class="col-12 col-lg-6 mb-3 mb-lg-0">
                <h3>Activity Summary</h3>
                <p>Total activities: <strong>{{total_activities}}</strong></p>
                {{#activity_summary}}
                <div>{{name}}: {{count}} <span style="color: #999; font-size: 0.9em;">({{learning_type}})</span></div>
                {{/activity_summary}}
            </div>
            <div class="col-12 col-lg-6">
                {{#chart_data.hasActivities}}
                <div>
                    <canvas id="learning-types-chart"></canvas>
                </div>
                {{/chart_data.hasActivities}}
            </div>
        </div>

        <!-- Improvements Section -->
        <div id="insights-improvements">
            <div class="row mb-4">
                <div class="col-12">
                    <h2>Improvement Suggestions</h2>
                    <div id="imp-summary"></div>
                    <ol id="imp-list"></ol>
                </div>
            </div>
        </div>
    </div>
</div>

